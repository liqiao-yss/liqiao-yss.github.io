---
title: 变基
tags: java 算法 git 排序 concurrent
categories: algorithm
---

# 变基

git整合来自不同分支的修改  主要有两种方法：merge、rebase

变基：将一系列提交按照原有次序依次应用到另一个分支上

合并：把最终结果合在一起





场景：开发任务分叉到两个不同分支，又各自提交了更新。

1.merge：最容易的整合方法。把两个分支的最新快照以及二者最近的共同祖先进行三方合并，生成一个新的快照并提交。

![通过合并操作来整合分叉了的历史。](https://git-scm.com/book/en/v2/images/basic-rebase-2.png)

2.变基rebase：提取c4中引入的补丁和修改，在c3的基础上应用一次。

将另一分支上的所有修改都移至当前分支上。

原理：首先找到这两个分支（即当前分支experiment、变基操作的目标基地分支master）的最近共同祖先 `C2`，然后对比当前分支相对于该祖先的历次提交，提取相应的修改并存为临时文件，然后将当前分支指向目标基底 `C3`, 最后以此将之前另存为临时文件的修改依序应用。

![将 `C4` 中的修改变基到 `C3` 上。](https://git-scm.com/book/en/v2/images/basic-rebase-3.png)

功能：把另一个分支的修改运用到当前的分支，

diff：检查的是工作区和暂存区之间的差异





场景：分支master、server、client

​			希望将client中的修改合并到主分支并发布，但暂时并不想合并server中的修改，可以使用git rebase命令的onto选项，选中在client分支里但不在server分支里的修改

git rebase --onto master server client







clone:得到的git文档库不会记录他是从哪一个git文档库复制出来的。

fork：复制出来的git文档库，会保留他的来源git文档库。后期可以再合并到原来的git文档库。

